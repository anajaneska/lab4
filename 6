#include <stdio.h>

int main()
{
    int M, N, maxZbir=0, zbir=0, cena=0;
    char tipDanok=0;
    float povrat=0, maxPovrat=0;
    scanf("%d", &M);
    
    for(int i=0;i<M;i++)
    {
        scanf("%d", &N);
        povrat = zbir = 0;
        for(int j=0;j<N;j++)
       { 
        scanf("%d %c", &cena, &tipDanok);
        if(tipDanok =='A')
        {
            povrat += cena * 0.18 * 0.15;
        }
        else if (tipDanok == 'B')
        {
            povrat+=cena*0.05*0.15;
        }
         zbir += cena;
       }
       
       if(zbir>30000)
       {
           printf("Sum %d is bigger than 30000\n", zbir);
       }
       else
       {
           if(povrat>maxPovrat)
           {
               maxPovrat=povrat;
               maxZbir=zbir;
           }
           printf("Total tax return is: %.2f\n", povrat);
       }
    }
    printf("Max amount of reciept: %d. Max tax return for reciepts: %.2f", maxZbir,maxPovrat);
}
